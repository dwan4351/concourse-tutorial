---
resources:
- name: resource-tutorial
  type: git
  source:
    uri: https://github.com/dwan4351/concourse-tutorial.git
    branch: develop
    git_config:
      - name: safe.directory
        value: '*'
- name: resource-gist
  type: git
  source:
    branch: main
    git_config:
      - name: safe.directory
        value: '*'
    uri:
    private_key:

jobs:
- name: job-bump-date
  serial: true
  plan:
  - get: resource-tutorial
  - get: resource-gist
  - task: bump-timestamp-file
    config:
      platform: linux
      image_resource:
        type: registry-image
        source: { repository: concourse/bosh-cli }

      inputs:
        - name: resource-tutorial
        - name: resource-gist
      outputs:
        - name: updated-gist
      run:
        path: resource-tutorial/tutorials/basic/publishing-outputs/bump-timestamp-file.sh

  - put: resource-gist
    params:
      repository: updated-gist
